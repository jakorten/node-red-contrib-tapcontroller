<script type="text/x-red" data-template-name="tapcontroller">
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic" placeholder="Topic">
    </div>

    <br/>
    <div class="form-row">
        <label for="node-input-address"><i class="fa fa-tag"></i> Address</label>
        <input type="text" id="node-input-address" placeholder="Address">
    </div>

    <br/>
    <div class="form-row">
        <label for="node-input-device"><i class="fa fa-tag"></i> Device</label>
        <input type="text" id="node-input-device" placeholder="Device">
    </div>

    <br/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="tapcontroller">
   <p><b>TapController</b> Output node, control the pins via topic and playload.</p>
   <p><b>Address:</b>  0x60 (default) or similar (0x60 .. 0x70).</p>
   <p><b>Device:</b> /dev/i2c-1 (default), but may need to be changed to /dev/i2c-0 depending on your Raspberry PI.</p>
   <p><b>Topic:</b> set to the root of the status topic, e.g. 'valve/', <br>
     the entire message will be: <br> valve/0/OPEN (opens Valve 0), <br>
     valve/1/CLOSE (closes Valve 1) <br> valve/0/OFF (disables outputs for valve 0).<br>
     taps can be 0..4, actual outputs are 0..9 (outputs are controlled in pairs).
   </p>

   <p><b>Version:</b> original can be found here: <a href="https://flows.nodered.org/node/node-red-contrib-tapcontroller">NPM tapcontroller</a></p>
</script>

<script type="text/javascript">
  RED.nodes.registerType('tapcontroller', {
    category: "Raspberry Pi",
    color: "#C6DBEF",
    defaults: {
        name: { value: ""},
        topic: { value: ""},
        address: { value: "0x60", required:true },
        device: { value: "/dev/i2c-1", required:true }
    },
    inputs: 1,
    outputs: 1,
    icon: "rpi.png",
    label: function() {
      return this.name || this.topic || "tapcontroller";
    },
    labelStyle: function() {
      return this.name? "node_label_italic" : "";
    }
  });
</script>
